# Story 2.1: 기본 캘린더 뷰 구현

## 📋 문서 정보
- **스토리 버전**: 2.0
- **작성일**: 2025-08-28
- **작성자**: Bob (Scrum Master Agent)
- **프로젝트명**: 바로캘린더 (Baro Calendar)
- **Epic**: 프론트엔드 캘린더 기능 구현
- **상태**: Ready for Development

---

## 🎯 **스토리 목표**

**완전한 캘린더 뷰 시스템 구현**
- 월간, 주간, 일간, 연간 뷰 모드 구현
- 프로젝트별 일정 필터링 및 시각화
- 드래그 앤 드롭 일정 관리
- 반응형 레이아웃 및 모바일 최적화
- 키보드 네비게이션 및 접근성 지원

---

## 👤 **사용자 스토리**

**사용자로서, 나는:**
1. 월간/주간/일간/연간 뷰를 자유롭게 전환하며 일정을 확인하고 싶다
2. 프로젝트별로 색상이 구분된 일정을 한눈에 파악하고 싶다
3. 드래그 앤 드롭으로 일정을 쉽게 이동하거나 수정하고 싶다
4. 모바일에서도 편리하게 캘린더를 사용하고 싶다
5. 키보드만으로도 모든 캘린더 기능을 사용하고 싶다

---

## 🏗️ **기술적 구현 요구사항**

### **1. 캘린더 컨텍스트 및 상태 관리**

**Zustand 기반 캘린더 스토어**
```typescript
// src/stores/calendarStore.ts
import { create } from 'zustand'
import { devtools, persist } from 'zustand/middleware'
import { startOfMonth, endOfMonth, startOfWeek, endOfWeek } from 'date-fns'

export type ViewMode = 'month' | 'week' | 'day' | 'year'
export type CalendarEvent = {
  id: string
  title: string
  description?: string
  startDate: Date
  endDate: Date
  allDay: boolean
  projectId: string
  projectColor: string
  recurrenceRule?: string
  reminder?: number
  attendees?: string[]
  location?: string
  status: 'confirmed' | 'tentative' | 'cancelled'
}

interface CalendarState {
  // View State
  currentDate: Date
  viewMode: ViewMode
  selectedDate: Date | null
  hoveredDate: Date | null
  
  // Events State
  events: CalendarEvent[]
  filteredProjects: string[]
  selectedEvent: CalendarEvent | null
  
  // UI State
  isLoading: boolean
  isSidebarOpen: boolean
  isDragging: boolean
  isCreating: boolean
  
  // Actions
  setCurrentDate: (date: Date) => void
  setViewMode: (mode: ViewMode) => void
  selectDate: (date: Date | null) => void
  hoverDate: (date: Date | null) => void
  
  // Event Actions
  addEvent: (event: CalendarEvent) => void
  updateEvent: (id: string, updates: Partial<CalendarEvent>) => void
  deleteEvent: (id: string) => void
  moveEvent: (eventId: string, newStart: Date, newEnd: Date) => void
  
  // Filter Actions
  toggleProjectFilter: (projectId: string) => void
  setProjectFilters: (projectIds: string[]) => void
  clearFilters: () => void
  
  // Navigation
  navigateNext: () => void
  navigatePrevious: () => void
  navigateToday: () => void
  navigateToDate: (date: Date) => void
  
  // Helpers
  getVisibleDateRange: () => { start: Date; end: Date }
  getFilteredEvents: () => CalendarEvent[]
}

export const useCalendarStore = create<CalendarState>()(
  devtools(
    persist(
      (set, get) => ({
        // Initial State
        currentDate: new Date(),
        viewMode: 'month',
        selectedDate: null,
        hoveredDate: null,
        events: [],
        filteredProjects: [],
        selectedEvent: null,
        isLoading: false,
        isSidebarOpen: true,
        isDragging: false,
        isCreating: false,
        
        // View Actions
        setCurrentDate: (date) => set({ currentDate: date }),
        setViewMode: (mode) => set({ viewMode: mode }),
        selectDate: (date) => set({ selectedDate: date }),
        hoverDate: (date) => set({ hoveredDate: date }),
        
        // Event Actions
        addEvent: (event) => set((state) => ({ 
          events: [...state.events, event] 
        })),
        
        updateEvent: (id, updates) => set((state) => ({
          events: state.events.map(event => 
            event.id === id ? { ...event, ...updates } : event
          )
        })),
        
        deleteEvent: (id) => set((state) => ({
          events: state.events.filter(event => event.id !== id)
        })),
        
        moveEvent: (eventId, newStart, newEnd) => {
          const event = get().events.find(e => e.id === eventId)
          if (event) {
            get().updateEvent(eventId, {
              startDate: newStart,
              endDate: newEnd
            })
          }
        },
        
        // Filter Actions
        toggleProjectFilter: (projectId) => set((state) => {
          const filtered = state.filteredProjects.includes(projectId)
            ? state.filteredProjects.filter(id => id !== projectId)
            : [...state.filteredProjects, projectId]
          return { filteredProjects: filtered }
        }),
        
        setProjectFilters: (projectIds) => set({ 
          filteredProjects: projectIds 
        }),
        
        clearFilters: () => set({ filteredProjects: [] }),
        
        // Navigation
        navigateNext: () => {
          const { currentDate, viewMode } = get()
          let newDate: Date
          
          switch (viewMode) {
            case 'day':
              newDate = new Date(currentDate.getTime() + 24 * 60 * 60 * 1000)
              break
            case 'week':
              newDate = new Date(currentDate.getTime() + 7 * 24 * 60 * 60 * 1000)
              break
            case 'month':
              newDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1)
              break
            case 'year':
              newDate = new Date(currentDate.getFullYear() + 1, 0, 1)
              break
            default:
              newDate = currentDate
          }
          
          set({ currentDate: newDate })
        },
        
        navigatePrevious: () => {
          const { currentDate, viewMode } = get()
          let newDate: Date
          
          switch (viewMode) {
            case 'day':
              newDate = new Date(currentDate.getTime() - 24 * 60 * 60 * 1000)
              break
            case 'week':
              newDate = new Date(currentDate.getTime() - 7 * 24 * 60 * 60 * 1000)
              break
            case 'month':
              newDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1)
              break
            case 'year':
              newDate = new Date(currentDate.getFullYear() - 1, 0, 1)
              break
            default:
              newDate = currentDate
          }
          
          set({ currentDate: newDate })
        },
        
        navigateToday: () => set({ currentDate: new Date() }),
        navigateToDate: (date) => set({ currentDate: date }),
        
        // Helpers
        getVisibleDateRange: () => {
          const { currentDate, viewMode } = get()
          let start: Date, end: Date
          
          switch (viewMode) {
            case 'day':
              start = new Date(currentDate)
              end = new Date(currentDate)
              break
            case 'week':
              start = startOfWeek(currentDate, { weekStartsOn: 0 })
              end = endOfWeek(currentDate, { weekStartsOn: 0 })
              break
            case 'month':
              const monthStart = startOfMonth(currentDate)
              const monthEnd = endOfMonth(currentDate)
              start = startOfWeek(monthStart, { weekStartsOn: 0 })
              end = endOfWeek(monthEnd, { weekStartsOn: 0 })
              break
            case 'year':
              start = new Date(currentDate.getFullYear(), 0, 1)
              end = new Date(currentDate.getFullYear(), 11, 31)
              break
            default:
              start = new Date()
              end = new Date()
          }
          
          return { start, end }
        },
        
        getFilteredEvents: () => {
          const { events, filteredProjects } = get()
          if (filteredProjects.length === 0) return events
          return events.filter(event => 
            filteredProjects.includes(event.projectId)
          )
        }
      }),
      {
        name: 'calendar-store',
        partialize: (state) => ({
          viewMode: state.viewMode,
          filteredProjects: state.filteredProjects,
          isSidebarOpen: state.isSidebarOpen
        })
      }
    )
  )
)
```

### **2. 월간 뷰 컴포넌트**

**Month View Component**
```typescript
// src/components/calendar/MonthView.tsx
import React, { useMemo } from 'react'
import { format, isSameMonth, isSameDay, isToday } from 'date-fns'
import { cn } from '@/lib/utils'
import { useCalendarStore } from '@/stores/calendarStore'
import { CalendarEvent } from '@/types/calendar'

interface MonthViewProps {
  onEventClick?: (event: CalendarEvent) => void
  onDateClick?: (date: Date) => void
  onEventDrop?: (eventId: string, date: Date) => void
}

export const MonthView: React.FC<MonthViewProps> = ({
  onEventClick,
  onDateClick,
  onEventDrop
}) => {
  const {
    currentDate,
    selectedDate,
    hoveredDate,
    getVisibleDateRange,
    getFilteredEvents,
    selectDate,
    hoverDate
  } = useCalendarStore()
  
  const { dates, weeks } = useMemo(() => {
    const { start, end } = getVisibleDateRange()
    const dates: Date[] = []
    const current = new Date(start)
    
    while (current <= end) {
      dates.push(new Date(current))
      current.setDate(current.getDate() + 1)
    }
    
    const weeks: Date[][] = []
    for (let i = 0; i < dates.length; i += 7) {
      weeks.push(dates.slice(i, i + 7))
    }
    
    return { dates, weeks }
  }, [currentDate])
  
  const events = getFilteredEvents()
  
  const getEventsForDate = (date: Date) => {
    return events.filter(event => {
      const eventStart = new Date(event.startDate)
      const eventEnd = new Date(event.endDate)
      return date >= eventStart && date <= eventEnd
    })
  }
  
  const handleDragStart = (e: React.DragEvent, event: CalendarEvent) => {
    e.dataTransfer.effectAllowed = 'move'
    e.dataTransfer.setData('eventId', event.id)
    useCalendarStore.setState({ isDragging: true })
  }
  
  const handleDragOver = (e: React.DragEvent) => {
    e.preventDefault()
    e.dataTransfer.dropEffect = 'move'
  }
  
  const handleDragEnter = (e: React.DragEvent, date: Date) => {
    e.preventDefault()
    hoverDate(date)
  }
  
  const handleDragLeave = (e: React.DragEvent) => {
    hoverDate(null)
  }
  
  const handleDrop = (e: React.DragEvent, date: Date) => {
    e.preventDefault()
    const eventId = e.dataTransfer.getData('eventId')
    if (eventId && onEventDrop) {
      onEventDrop(eventId, date)
    }
    useCalendarStore.setState({ isDragging: false })
    hoverDate(null)
  }
  
  return (
    <div className="calendar-month-view h-full flex flex-col">
      {/* Weekday Headers */}
      <div className="grid grid-cols-7 gap-px bg-border mb-px">
        {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map((day) => (
          <div
            key={day}
            className="bg-muted text-center py-2 text-sm font-medium text-muted-foreground"
          >
            {day}
          </div>
        ))}
      </div>
      
      {/* Calendar Grid */}
      <div className="flex-1 grid grid-rows-6 gap-px bg-border">
        {weeks.map((week, weekIndex) => (
          <div key={weekIndex} className="grid grid-cols-7 gap-px">
            {week.map((date, dayIndex) => {
              const dayEvents = getEventsForDate(date)
              const isCurrentMonth = isSameMonth(date, currentDate)
              const isSelected = selectedDate && isSameDay(date, selectedDate)
              const isHovered = hoveredDate && isSameDay(date, hoveredDate)
              const isTodayDate = isToday(date)
              
              return (
                <div
                  key={`${weekIndex}-${dayIndex}`}
                  className={cn(
                    'bg-background p-2 min-h-[100px] cursor-pointer transition-colors',
                    'hover:bg-accent/50',
                    !isCurrentMonth && 'bg-muted/30 text-muted-foreground',
                    isSelected && 'ring-2 ring-primary',
                    isHovered && 'bg-accent',
                    isTodayDate && 'bg-primary/10'
                  )}
                  onClick={() => {
                    selectDate(date)
                    onDateClick?.(date)
                  }}
                  onDragOver={handleDragOver}
                  onDragEnter={(e) => handleDragEnter(e, date)}
                  onDragLeave={handleDragLeave}
                  onDrop={(e) => handleDrop(e, date)}
                >
                  {/* Date Number */}
                  <div className={cn(
                    'text-sm font-medium mb-1',
                    isTodayDate && 'text-primary font-bold'
                  )}>
                    {format(date, 'd')}
                  </div>
                  
                  {/* Events */}
                  <div className="space-y-1">
                    {dayEvents.slice(0, 3).map((event) => (
                      <div
                        key={event.id}
                        draggable
                        onDragStart={(e) => handleDragStart(e, event)}
                        onClick={(e) => {
                          e.stopPropagation()
                          onEventClick?.(event)
                        }}
                        className={cn(
                          'text-xs px-1 py-0.5 rounded cursor-move truncate',
                          'hover:opacity-80 transition-opacity'
                        )}
                        style={{
                          backgroundColor: `${event.projectColor}20`,
                          borderLeft: `3px solid ${event.projectColor}`
                        }}
                        title={event.title}
                      >
                        {event.title}
                      </div>
                    ))}
                    {dayEvents.length > 3 && (
                      <div className="text-xs text-muted-foreground pl-1">
                        +{dayEvents.length - 3} more
                      </div>
                    )}
                  </div>
                </div>
              )
            })}
          </div>
        ))}
      </div>
    </div>
  )
}
```

### **3. 주간 뷰 컴포넌트**

**Week View Component**
```typescript
// src/components/calendar/WeekView.tsx
import React, { useMemo, useRef } from 'react'
import { format, startOfDay, addHours, isSameDay } from 'date-fns'
import { cn } from '@/lib/utils'
import { useCalendarStore } from '@/stores/calendarStore'
import { CalendarEvent } from '@/types/calendar'

interface WeekViewProps {
  onEventClick?: (event: CalendarEvent) => void
  onTimeSlotClick?: (date: Date, hour: number) => void
  onEventResize?: (eventId: string, newDuration: number) => void
}

export const WeekView: React.FC<WeekViewProps> = ({
  onEventClick,
  onTimeSlotClick,
  onEventResize
}) => {
  const {
    currentDate,
    getVisibleDateRange,
    getFilteredEvents
  } = useCalendarStore()
  
  const scrollContainerRef = useRef<HTMLDivElement>(null)
  
  const { weekDays, hours } = useMemo(() => {
    const { start, end } = getVisibleDateRange()
    const weekDays: Date[] = []
    const current = new Date(start)
    
    while (current <= end) {
      weekDays.push(new Date(current))
      current.setDate(current.getDate() + 1)
    }
    
    const hours = Array.from({ length: 24 }, (_, i) => i)
    
    return { weekDays, hours }
  }, [currentDate])
  
  const events = getFilteredEvents()
  
  const getEventsForDay = (date: Date) => {
    return events.filter(event => {
      const eventStart = new Date(event.startDate)
      return isSameDay(eventStart, date)
    })
  }
  
  const calculateEventPosition = (event: CalendarEvent) => {
    const startTime = new Date(event.startDate)
    const endTime = new Date(event.endDate)
    const startHour = startTime.getHours() + startTime.getMinutes() / 60
    const duration = (endTime.getTime() - startTime.getTime()) / (1000 * 60 * 60)
    
    return {
      top: `${(startHour / 24) * 100}%`,
      height: `${(duration / 24) * 100}%`,
      minHeight: '20px'
    }
  }
  
  // Auto-scroll to current time on mount
  React.useEffect(() => {
    if (scrollContainerRef.current) {
      const currentHour = new Date().getHours()
      const scrollPosition = (currentHour - 1) * 60 // 60px per hour
      scrollContainerRef.current.scrollTop = scrollPosition
    }
  }, [])
  
  return (
    <div className="calendar-week-view h-full flex flex-col">
      {/* Header with Day Names */}
      <div className="grid grid-cols-8 gap-px bg-border mb-px">
        <div className="bg-muted p-2 text-center text-sm font-medium">
          Time
        </div>
        {weekDays.map((day) => (
          <div
            key={day.toISOString()}
            className={cn(
              'bg-muted p-2 text-center',
              isToday(day) && 'bg-primary/10'
            )}
          >
            <div className="text-sm font-medium">
              {format(day, 'EEE')}
            </div>
            <div className={cn(
              'text-lg',
              isToday(day) && 'text-primary font-bold'
            )}>
              {format(day, 'd')}
            </div>
          </div>
        ))}
      </div>
      
      {/* Scrollable Time Grid */}
      <div 
        ref={scrollContainerRef}
        className="flex-1 overflow-y-auto"
      >
        <div className="relative">
          {/* Time Labels and Grid */}
          {hours.map((hour) => (
            <div
              key={hour}
              className="grid grid-cols-8 gap-px bg-border h-[60px]"
            >
              <div className="bg-muted text-right pr-2 pt-1 text-xs text-muted-foreground">
                {format(new Date().setHours(hour, 0, 0, 0), 'ha')}
              </div>
              {weekDays.map((day) => (
                <div
                  key={`${day.toISOString()}-${hour}`}
                  className="bg-background border-l hover:bg-accent/30 cursor-pointer relative"
                  onClick={() => onTimeSlotClick?.(day, hour)}
                >
                  {/* Events for this time slot */}
                  {hour === 0 && (
                    <div className="absolute inset-0 pointer-events-none">
                      {getEventsForDay(day).map((event) => {
                        const position = calculateEventPosition(event)
                        return (
                          <div
                            key={event.id}
                            className="absolute left-1 right-1 pointer-events-auto"
                            style={position}
                          >
                            <div
                              className={cn(
                                'h-full px-2 py-1 rounded text-xs overflow-hidden',
                                'cursor-pointer hover:opacity-90 transition-opacity',
                                'shadow-sm border'
                              )}
                              style={{
                                backgroundColor: `${event.projectColor}30`,
                                borderColor: event.projectColor
                              }}
                              onClick={(e) => {
                                e.stopPropagation()
                                onEventClick?.(event)
                              }}
                            >
                              <div className="font-medium truncate">
                                {event.title}
                              </div>
                              {parseFloat(position.height) > 40 && (
                                <div className="text-xs opacity-75 truncate">
                                  {format(new Date(event.startDate), 'h:mm a')}
                                </div>
                              )}
                            </div>
                          </div>
                        )
                      })}
                    </div>
                  )}
                </div>
              ))}
            </div>
          ))}
        </div>
      </div>
      
      {/* Current Time Indicator */}
      <CurrentTimeIndicator />
    </div>
  )
}

// Current Time Indicator Component
const CurrentTimeIndicator: React.FC = () => {
  const [currentTime, setCurrentTime] = React.useState(new Date())
  
  React.useEffect(() => {
    const timer = setInterval(() => {
      setCurrentTime(new Date())
    }, 60000) // Update every minute
    
    return () => clearInterval(timer)
  }, [])
  
  const currentHour = currentTime.getHours() + currentTime.getMinutes() / 60
  const topPosition = `${(currentHour / 24) * 100}%`
  
  return (
    <div
      className="absolute left-0 right-0 pointer-events-none z-10"
      style={{ top: topPosition }}
    >
      <div className="relative">
        <div className="absolute left-[60px] right-0 h-0.5 bg-destructive" />
        <div className="absolute left-[56px] w-2 h-2 bg-destructive rounded-full -mt-[3px]" />
      </div>
    </div>
  )
}
```

### **4. 캘린더 헤더 및 네비게이션**

**Calendar Header Component**
```typescript
// src/components/calendar/CalendarHeader.tsx
import React from 'react'
import { format } from 'date-fns'
import { ChevronLeft, ChevronRight, Calendar, Plus } from 'lucide-react'
import { Button } from '@/components/ui/button'
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select'
import { useCalendarStore } from '@/stores/calendarStore'

interface CalendarHeaderProps {
  onCreateEvent?: () => void
}

export const CalendarHeader: React.FC<CalendarHeaderProps> = ({
  onCreateEvent
}) => {
  const {
    currentDate,
    viewMode,
    setViewMode,
    navigateNext,
    navigatePrevious,
    navigateToday
  } = useCalendarStore()
  
  const getHeaderTitle = () => {
    switch (viewMode) {
      case 'day':
        return format(currentDate, 'EEEE, MMMM d, yyyy')
      case 'week':
        const weekStart = new Date(currentDate)
        weekStart.setDate(currentDate.getDate() - currentDate.getDay())
        const weekEnd = new Date(weekStart)
        weekEnd.setDate(weekStart.getDate() + 6)
        return `${format(weekStart, 'MMM d')} - ${format(weekEnd, 'MMM d, yyyy')}`
      case 'month':
        return format(currentDate, 'MMMM yyyy')
      case 'year':
        return format(currentDate, 'yyyy')
      default:
        return ''
    }
  }
  
  return (
    <div className="calendar-header flex items-center justify-between p-4 border-b">
      <div className="flex items-center gap-2">
        {/* Navigation Controls */}
        <div className="flex items-center gap-1">
          <Button
            variant="outline"
            size="icon"
            onClick={navigatePrevious}
            aria-label="Previous period"
          >
            <ChevronLeft className="h-4 w-4" />
          </Button>
          <Button
            variant="outline"
            size="icon"
            onClick={navigateNext}
            aria-label="Next period"
          >
            <ChevronRight className="h-4 w-4" />
          </Button>
        </div>
        
        {/* Today Button */}
        <Button
          variant="outline"
          size="sm"
          onClick={navigateToday}
          className="hidden sm:flex"
        >
          Today
        </Button>
        
        {/* Current Period Display */}
        <h2 className="text-lg font-semibold ml-4">
          {getHeaderTitle()}
        </h2>
      </div>
      
      <div className="flex items-center gap-2">
        {/* View Mode Selector */}
        <Select
          value={viewMode}
          onValueChange={(value) => setViewMode(value as any)}
        >
          <SelectTrigger className="w-[120px]">
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="day">Day</SelectItem>
            <SelectItem value="week">Week</SelectItem>
            <SelectItem value="month">Month</SelectItem>
            <SelectItem value="year">Year</SelectItem>
          </SelectContent>
        </Select>
        
        {/* Create Event Button */}
        <Button onClick={onCreateEvent} size="sm">
          <Plus className="h-4 w-4 mr-1" />
          New Event
        </Button>
      </div>
    </div>
  )
}
```

### **5. 키보드 네비게이션 훅**

**Keyboard Navigation Hook**
```typescript
// src/hooks/useCalendarKeyboard.ts
import { useEffect } from 'react'
import { useCalendarStore } from '@/stores/calendarStore'

export const useCalendarKeyboard = () => {
  const {
    navigateNext,
    navigatePrevious,
    navigateToday,
    setViewMode,
    viewMode,
    selectedDate,
    selectDate
  } = useCalendarStore()
  
  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      // Prevent default if we're handling the key
      const preventDefaultKeys = [
        'ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown',
        't', 'd', 'w', 'm', 'y'
      ]
      
      if (preventDefaultKeys.includes(e.key)) {
        e.preventDefault()
      }
      
      // Navigation keys
      switch (e.key) {
        case 'ArrowLeft':
          if (e.shiftKey) {
            navigatePrevious()
          } else if (selectedDate) {
            const newDate = new Date(selectedDate)
            newDate.setDate(newDate.getDate() - 1)
            selectDate(newDate)
          }
          break
          
        case 'ArrowRight':
          if (e.shiftKey) {
            navigateNext()
          } else if (selectedDate) {
            const newDate = new Date(selectedDate)
            newDate.setDate(newDate.getDate() + 1)
            selectDate(newDate)
          }
          break
          
        case 'ArrowUp':
          if (selectedDate) {
            const newDate = new Date(selectedDate)
            newDate.setDate(newDate.getDate() - 7)
            selectDate(newDate)
          }
          break
          
        case 'ArrowDown':
          if (selectedDate) {
            const newDate = new Date(selectedDate)
            newDate.setDate(newDate.getDate() + 7)
            selectDate(newDate)
          }
          break
          
        case 't':
          if (e.ctrlKey || e.metaKey) {
            navigateToday()
          }
          break
          
        // View mode shortcuts
        case 'd':
          if (e.altKey) setViewMode('day')
          break
        case 'w':
          if (e.altKey) setViewMode('week')
          break
        case 'm':
          if (e.altKey) setViewMode('month')
          break
        case 'y':
          if (e.altKey) setViewMode('year')
          break
      }
    }
    
    window.addEventListener('keydown', handleKeyDown)
    return () => window.removeEventListener('keydown', handleKeyDown)
  }, [selectedDate])
  
  return {
    shortcuts: [
      { key: '←/→', description: 'Navigate days' },
      { key: '↑/↓', description: 'Navigate weeks' },
      { key: 'Shift + ←/→', description: 'Previous/Next period' },
      { key: 'Ctrl/Cmd + T', description: 'Go to today' },
      { key: 'Alt + D/W/M/Y', description: 'Change view mode' }
    ]
  }
}
```

---

## 🎨 **사용자 경험 (UX) 설계**

### **1. 반응형 레이아웃**

**Mobile Responsive Calendar**
```typescript
// src/components/calendar/ResponsiveCalendar.tsx
import React from 'react'
import { useMediaQuery } from '@/hooks/useMediaQuery'
import { MonthView } from './MonthView'
import { WeekView } from './WeekView'
import { MobileCalendarView } from './MobileCalendarView'

export const ResponsiveCalendar: React.FC = () => {
  const isMobile = useMediaQuery('(max-width: 768px)')
  const isTablet = useMediaQuery('(max-width: 1024px)')
  
  const { viewMode } = useCalendarStore()
  
  if (isMobile) {
    return <MobileCalendarView />
  }
  
  if (isTablet && viewMode === 'week') {
    // Show simplified week view on tablet
    return <WeekView simplified />
  }
  
  switch (viewMode) {
    case 'month':
      return <MonthView />
    case 'week':
      return <WeekView />
    case 'day':
      return <DayView />
    case 'year':
      return <YearView />
    default:
      return <MonthView />
  }
}
```

### **2. 드래그 앤 드롭 피드백**

**Visual Feedback for Drag and Drop**
```css
/* src/styles/calendar.css */
.calendar-event-dragging {
  opacity: 0.5;
  cursor: grabbing;
}

.calendar-drop-zone-active {
  background-color: var(--primary) !important;
  opacity: 0.2;
}

.calendar-drop-preview {
  border: 2px dashed var(--primary);
  background-color: var(--primary);
  opacity: 0.3;
}

/* Smooth transitions */
.calendar-event {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.calendar-event:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}
```

---

## 📊 **성능 최적화**

### **1. 가상화 구현**

**Virtualized Event List**
```typescript
// src/components/calendar/VirtualizedEventList.tsx
import { FixedSizeList } from 'react-window'
import { CalendarEvent } from '@/types/calendar'

interface VirtualizedEventListProps {
  events: CalendarEvent[]
  height: number
}

export const VirtualizedEventList: React.FC<VirtualizedEventListProps> = ({
  events,
  height
}) => {
  const EventRow = ({ index, style }: { index: number; style: React.CSSProperties }) => {
    const event = events[index]
    return (
      <div style={style} className="px-2">
        <div 
          className="p-2 rounded border cursor-pointer hover:bg-accent"
          style={{ borderColor: event.projectColor }}
        >
          <div className="font-medium truncate">{event.title}</div>
          <div className="text-sm text-muted-foreground">
            {format(new Date(event.startDate), 'MMM d, h:mm a')}
          </div>
        </div>
      </div>
    )
  }
  
  return (
    <FixedSizeList
      height={height}
      itemCount={events.length}
      itemSize={80}
      width="100%"
    >
      {EventRow}
    </FixedSizeList>
  )
}
```

### **2. 메모이제이션 최적화**

```typescript
// src/hooks/useOptimizedCalendar.ts
import { useMemo, useCallback } from 'react'
import { useCalendarStore } from '@/stores/calendarStore'

export const useOptimizedCalendar = () => {
  const events = useCalendarStore((state) => state.events)
  const filteredProjects = useCalendarStore((state) => state.filteredProjects)
  
  // Memoize filtered events
  const filteredEvents = useMemo(() => {
    if (filteredProjects.length === 0) return events
    return events.filter(event => 
      filteredProjects.includes(event.projectId)
    )
  }, [events, filteredProjects])
  
  // Memoize event grouping by date
  const eventsByDate = useMemo(() => {
    const grouped = new Map<string, CalendarEvent[]>()
    
    filteredEvents.forEach(event => {
      const dateKey = format(new Date(event.startDate), 'yyyy-MM-dd')
      if (!grouped.has(dateKey)) {
        grouped.set(dateKey, [])
      }
      grouped.get(dateKey)!.push(event)
    })
    
    return grouped
  }, [filteredEvents])
  
  // Memoize event actions
  const moveEvent = useCallback((eventId: string, newDate: Date) => {
    useCalendarStore.getState().moveEvent(eventId, newDate, newDate)
  }, [])
  
  return {
    filteredEvents,
    eventsByDate,
    moveEvent
  }
}
```

---

## ✅ **Definition of Done**

### **기능 요구사항**
- [ ] 월간/주간/일간/연간 뷰 모드 구현
- [ ] 프로젝트별 색상 구분 및 필터링
- [ ] 드래그 앤 드롭 일정 이동
- [ ] 일정 생성/수정/삭제 기능
- [ ] 키보드 네비게이션 완전 지원

### **기술 요구사항**
- [ ] Zustand 기반 상태 관리
- [ ] date-fns를 활용한 날짜 처리
- [ ] React Window를 활용한 가상화
- [ ] 반응형 레이아웃 구현
- [ ] TypeScript 타입 안전성

### **성능 요구사항**
- [ ] 1000개 이상 이벤트 처리 시 60fps 유지
- [ ] 초기 로딩 시간 2초 이내
- [ ] 뷰 전환 애니메이션 부드러움
- [ ] 메모리 사용량 최적화

### **접근성 요구사항**
- [ ] ARIA 레이블 및 역할 적용
- [ ] 키보드 전용 네비게이션
- [ ] 스크린 리더 호환성
- [ ] 고대비 모드 지원

### **테스트 요구사항**
- [ ] 단위 테스트 커버리지 80% 이상
- [ ] E2E 테스트 시나리오 작성
- [ ] 크로스 브라우저 테스트
- [ ] 모바일 디바이스 테스트

---

## 📚 **관련 문서 참조**

- [03. Component Standards](../ui-architecture/03-component-standards.md)
- [04. State Management](../ui-architecture/04-state-management.md)
- [08. Runtime Performance](../ui-architecture/08-runtime-performance.md)
- [13. PWA & Mobile Responsive](../ui-architecture/13-pwa-mobile-responsive.md)

---

**이 스토리는 바로캘린더의 핵심 캘린더 뷰 시스템 구현을 위한 종합적인 기술 가이드입니다. 다양한 뷰 모드와 직관적인 인터페이스를 통해 사용자에게 최상의 일정 관리 경험을 제공합니다.**