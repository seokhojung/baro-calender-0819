# Story 1.2: 고성능 캘린더 뷰 시스템 및 실시간 동기화 구현

## Status
Draft

## Story
**As a** 사용자,
**I want** calendar-26.tsx 블록 기반의 고성능 월/주 뷰 캘린더와 WebSocket 실시간 동기화를 통해,
**so that** 150ms 이하 뷰 전환과 60fps 애니메이션으로 부드러운 일정 관리 경험을 얻을 수 있다.

## Acceptance Criteria
1. **calendar-26.tsx 기반 구현**: MCP 서버에서 calendar-26.tsx 블록을 가져와 메인 캘린더 구현해야 한다
2. **성능 목표 달성**: 월↔주 뷰 전환 p95 ≤ 150ms, 애니메이션 60fps 달성해야 한다
3. **실시간 동기화**: WebSocket 기반 실시간 이벤트 업데이트 및 자동 재연결 구현해야 한다
4. **가상 스크롤링**: 대량 이벤트 처리를 위한 가상 스크롤링 최적화 구현해야 한다
5. **Apollo GraphQL 통합**: 정규화 캐시와 Subscription을 활용한 데이터 관리 구현해야 한다
6. **반응형 디자인**: 5단계 브레이크포인트 기반 완전한 반응형 구현해야 한다
7. **접근성 준수**: WCAG 2.2 AA 기준, 키보드 탐색, 스크린 리더 지원 구현해야 한다
8. **성능 모니터링**: Core Web Vitals 실시간 측정 및 Sentry 통합 구현해야 한다

## Tasks / Subtasks
- [ ] **1단계: MCP 서버 기반 캘린더 블록 분석** (AC: 1)
  - [ ] calendar-26.tsx 블록 소스 확인: `mcp_shadcn-ui-mcp_get_block calendar-26`
  - [ ] 관련 컴포넌트 데모 확인: `mcp_shadcn-ui-mcp_get_component_demo calendar`
  - [ ] Tabs 컴포넌트 확인: `mcp_shadcn-ui-mcp_get_component_demo tabs`
  - [ ] 캘린더 블록 구조 분석 및 커스터마이징 계획 수립

- [ ] **2단계: 고성능 캘린더 컨테이너 구현** (AC: 1, 2, 4)
  - [ ] CalendarContainer.tsx 구현 (calendar-26.tsx 블록 기반)
  - [ ] MonthView.tsx + WeekView.tsx 구현 (가상 스크롤링)
  - [ ] 월/주 뷰 전환 Tabs 최적화 (< 150ms 목표)
  - [ ] React.memo + useMemo + useCallback 메모이제이션 적용
  - [ ] 가상 스크롤링으로 1000+ 이벤트 처리 최적화
  - [ ] MCP 생성물 주석 템플릿 적용

- [ ] **3단계: Apollo GraphQL 데이터 레이어** (AC: 5)
  - [ ] GraphQL 스키마 타입 정의 (Event, Project, User, Recurrence)
  - [ ] 캘린더 쿼리 구현: GET_CALENDAR_EVENTS (기간별, 프로젝트별)
  - [ ] Apollo Cache 정책 설정 (keyArgs, merge 함수)
  - [ ] 에러 처리 및 재시도 로직 (지수 백오프)
  - [ ] Loading 상태 및 스켈레톤 UI 구현

- [ ] **4단계: 실시간 WebSocket 동기화 시스템** (AC: 3)
  - [ ] WebSocket Manager 클래스 구현 (자동 재연결, 메시지 큐잉)
  - [ ] GraphQL Subscription 구현: EVENT_UPDATES_SUBSCRIPTION
  - [ ] 실시간 이벤트 업데이트 처리 (CREATED, UPDATED, DELETED)
  - [ ] 연결 상태 모니터링 및 사용자 피드백
  - [ ] 오프라인/온라인 상태 처리

- [ ] **5단계: 이벤트 표시 및 상호작용 시스템** (AC: 2, 7)
  - [ ] EventCard.tsx 구현 (프로젝트 색상 반영)
  - [ ] AllDayEvent.tsx (종일 일정, 뷰 상단 고정)
  - [ ] TimeEvent.tsx (시간대별 일정)
  - [ ] 이벤트 겹침 처리 및 레이어 관리
  - [ ] 드래그-드롭 옵티컬 피드백 (< 50ms)
  - [ ] 더블클릭 이벤트 생성, ESC 취소 처리

- [ ] **6단계: 반응형 디자인 시스템** (AC: 6)
  - [ ] 5단계 브레이크포인트 반응형 구현 (sm~2xl)
  - [ ] 모바일 터치 제스처 최적화 (롱프레스 300ms)
  - [ ] 태블릿 하이브리드 인터페이스 구현
  - [ ] 데스크톱 키보드 단축키 구현
  - [ ] 다크모드 테마 전환 최적화

- [ ] **7단계: 접근성 시스템 구현** (AC: 7)
  - [ ] 키보드 탐색 구현 (Tab, Arrow 키, Enter, Space)
  - [ ] ARIA 라벨 및 역할 속성 설정
  - [ ] 스크린 리더 지원 (날짜, 이벤트 정보 음성 안내)
  - [ ] 색상 대비 검증 (4.5:1 비율) 및 자동 조정
  - [ ] 포커스 관리 (포커스 트랩, 시각적 표시)

- [ ] **8단계: 성능 모니터링 및 최적화** (AC: 2, 8)
  - [ ] Core Web Vitals 실시간 측정 (LCP, FID, CLS)
  - [ ] 캘린더 특화 메트릭 수집 (뷰 전환 시간, 렌더링 시간)
  - [ ] Sentry 성능 추적 통합
  - [ ] 번들 크기 최적화 (코드 스플리팅, 트리 셰이킹)
  - [ ] 메모리 누수 방지 및 정리 로직

## Dev Notes

### calendar-26.tsx 블록 활용 전략
**[Source: docs/ui-ux/shadcn-ui-workflow-rules.md + ui-architecture/03-component-standards.md]**
```bash
# MCP 서버 필수 명령어 순서
mcp_shadcn-ui-mcp_list_blocks --category calendar
mcp_shadcn-ui-mcp_get_block calendar-26
mcp_shadcn-ui-mcp_get_component_demo calendar
mcp_shadcn-ui-mcp_get_component_demo tabs
```

**calendar-26.tsx 블록 특징:**
- **크기**: 4,362 bytes
- **기능**: 월/주 뷰 전환 기능 내장
- **우선 사용**: 단일 calendar 컴포넌트보다 blocks 우선
- **커스터마이징**: 바로캘린더 요구사항에 맞게 확장

---

*이 문서는 Story 1.2의 복잡도 재평가 및 분할 계획을 다룹니다. 실제 구현은 Story 1.2a부터 순차적으로 진행합니다.*

