# Story 1.1: 완전한 프로젝트 기반 설정 및 개발 환경 구축

## Status
Draft

## Story
**As a** 개발자,
**I want** Next.js 15 + ShadCN UI + Apollo Client + Zustand 기반의 완전한 개발 환경과 디자인 시스템을 구축하고,
**so that** 바로캘린더 애플리케이션의 견고한 기반 위에서 효율적으로 개발할 수 있다.

## Acceptance Criteria
1. **프로젝트 초기 설정**: Next.js 15.4.6 + TypeScript + Tailwind CSS + ESLint 환경이 구축되어야 한다
2. **ShadCN UI MCP 시스템**: MCP 서버 기반 ShadCN UI 컴포넌트 시스템이 설치되고 설정되어야 한다
3. **완전한 디자인 시스템**: Design Tokens, 8색상 팔레트, Tweak CN 테마 시스템이 구현되어야 한다
4. **상태 관리 아키텍처**: Apollo Client + Zustand 통합 상태 관리 시스템이 설정되어야 한다
5. **기본 레이아웃**: dashboard-01.tsx, sidebar-02.tsx 블록 기반 레이아웃 시스템이 구현되어야 한다
6. **성능 모니터링**: Sentry, Core Web Vitals 수집 시스템이 구축되어야 한다
7. **개발 도구**: CI/CD, 테스트 환경, 품질 게이트가 설정되어야 한다
8. **접근성 기반**: WCAG 2.2 AA 준수하는 접근성 시스템이 구축되어야 한다

## Tasks / Subtasks
- [ ] **1단계: 프로젝트 기본 설정** (AC: 1)
  - [ ] Next.js 15.4.6 App Router + TypeScript + Tailwind CSS 프로젝트 생성
  - [ ] Turbopack 번들러 설정 및 최적화
  - [ ] ESLint + Prettier + Husky pre-commit hooks 설정
  - [ ] 프로젝트 디렉토리 구조 생성 (ui-architecture/02 기반)

- [ ] **2단계: ShadCN UI MCP 서버 시스템 구축** (AC: 2)
  - [ ] MCP 서버 실행: `npx shadcn-ui-mcp-server`
  - [ ] 컴포넌트 목록 확인: `mcp_shadcn-ui-mcp_list_components`
  - [ ] 블록 목록 확인: `mcp_shadcn-ui-mcp_list_blocks`
  - [ ] 핵심 컴포넌트 설치: button, input, select, tabs, calendar, card, dialog, sheet
  - [ ] 우선 블록 설치: dashboard-01.tsx, sidebar-02.tsx, calendar-26.tsx
  - [ ] MCP 생성물 주석 템플릿 적용

- [ ] **3단계: 완전한 디자인 시스템 구축** (AC: 3)
  - [ ] Design Tokens CSS 변수 시스템 구현 (ui-architecture/05)
  - [ ] 8가지 프로젝트 색상 팔레트 구현 (blue, green, purple, orange, red, teal, pink, indigo)
  - [ ] Tweak CN 테마 시스템 설정: `npx tweak-cn@latest init`
  - [ ] 타이포그래피 시스템 구현 (Inter 폰트, 체계적 스케일)
  - [ ] 간격 시스템 구현 (4px 기준, 시맨틱 토큰)
  - [ ] Shadow & Elevation 시스템 구현

- [ ] **4단계: 통합 상태 관리 아키텍처** (AC: 4)
  - [ ] Apollo Client 설정 및 GraphQL 스키마 타입 생성
  - [ ] Zustand 도메인별 스토어 구현 (calendar, project, user, ui)
  - [ ] 클라이언트-서버 상태 동기화 패턴 구현
  - [ ] 낙관적 업데이트 시스템 구현
  - [ ] 실시간 WebSocket 동기화 준비

- [ ] **5단계: 기본 레이아웃 시스템** (AC: 5)
  - [ ] Dashboard 메인 레이아웃: `mcp_shadcn-ui-mcp_get_block dashboard-01`
  - [ ] Sidebar 네비게이션: `mcp_shadcn-ui-mcp_get_block sidebar-02`
  - [ ] Header 컴포넌트 구현 (사용자 프로필, 테마 토글)
  - [ ] 반응형 레이아웃 (5단계 브레이크포인트)
  - [ ] 다크모드 테마 전환 시스템

- [ ] **6단계: 성능 모니터링 및 관측** (AC: 6)
  - [ ] Sentry 에러 추적 시스템 설정
  - [ ] Core Web Vitals 모니터링 구현 (LCP, FID, CLS, FCP, TTI)
  - [ ] 성능 메트릭 수집 시스템 구현
  - [ ] 번들 분석 도구 설정 (webpack-bundle-analyzer)
  - [ ] Lighthouse CI 성능 게이트 설정

- [ ] **7단계: 개발 도구 및 품질 시스템** (AC: 7)
  - [ ] GitHub Actions CI/CD 파이프라인 구축
  - [ ] Jest + RTL 단위 테스트 환경 설정
  - [ ] Playwright E2E 테스트 환경 설정
  - [ ] 테스트 커버리지 80% 게이트 설정
  - [ ] 코드 품질 게이트 (ESLint, TypeScript, Prettier)

- [ ] **8단계: 접근성 기반 시스템** (AC: 8)
  - [ ] WCAG 2.2 AA 검증 시스템 구현
  - [ ] 색상 대비 검증 유틸리티 (4.5:1 비율)
  - [ ] 터치 타겟 크기 검증 (44px 최소)
  - [ ] 키보드 네비게이션 시스템
  - [ ] 스크린 리더 지원 (ARIA 라벨, 역할)
  - [ ] jest-axe 접근성 테스트 도구 설정

## Dev Notes

### 모든 UI 아키텍처 문서 종합 분석
**23개 문서 완전 분석 결과 반영**

### 기술 스택 완전 구성
**[Source: ui-architecture/01-frontend-tech-stack.md + 04-state-management.md]**
```typescript
// 완전한 기술 스택
const TECH_STACK = {
  framework: "Next.js 15.4.6", // App Router, Server Components, Turbopack
  language: "TypeScript 5.3+", // Strict mode, Advanced types
  styling: "Tailwind CSS 3.4+ + ShadCN UI v4",
  stateManagement: {
    client: "Zustand 4.4+", // 도메인별 분리
    server: "Apollo Client + GraphQL", // 정규화 캐시, Subscription
    integration: "클라이언트-서버 동기화 패턴"
  },
  animation: "Framer Motion 11.0+",
  testing: "Jest + RTL + Playwright",
  monitoring: "Sentry + Core Web Vitals",
  bundler: "Turbopack (Next.js 15 기본)"
}
```

### ShadCN UI Workflow Rules 완전 준수
**[Source: docs/ui-ux/shadcn-ui-workflow-rules.md]**
- **MCP 서버 필수 사용**: 모든 컴포넌트 생성은 MCP 서버 경유
- **Blocks 우선 원칙**: dashboard-01, sidebar-02, calendar-26 우선 사용
- **MCP 생성물 주석 템플릿**: Source, Command, Version, GeneratedAt 기록
- **수동 코딩 금지**: MCP 서버 장애 시에만 예외 승인 절차

### 완전한 디자인 시스템
**[Source: ui-architecture/05-design-system-foundations.md + 06-component-styling-patterns.md + 07-theme-responsive-design.md]**
```typescript
// 8가지 프로젝트 색상 시스템
const PROJECT_COLORS = {
  blue: '#3B82F6',    green: '#10B981',   purple: '#8B5CF6',  orange: '#F59E0B',
  red: '#EF4444',     teal: '#14B8A6',    pink: '#EC4899',    indigo: '#6366F1'
}

// Design Tokens 시스템
const DESIGN_TOKENS = {
  spacing: "4px 기준 체계", // xs(4px) ~ 5xl(96px)
  typography: "Inter 폰트, 9단계 스케일", // xs(12px) ~ 9xl(128px)
  shadows: "Material Design 기반 엘레베이션", // 0~6 레벨
  borderRadius: "sm(2px) ~ 3xl(24px)",
  transitions: "fast(150ms), normal(300ms), slow(500ms)"
}

// Tweak CN 테마 시스템
const THEME_SYSTEM = {
  themes: ["light", "dark", "auto"],
  colorScales: "50~900 단계별 색상",
  dynamicSwitching: "CSS 변수 기반 런타임 전환"
}
```

### 통합 상태 관리 아키텍처
**[Source: ui-architecture/04-state-management.md + 14-graphql-api-integration.md + 15-realtime-websocket-sync.md]**
```typescript
// 도메인별 Zustand 스토어
interface StateArchitecture {
  calendarStore: "뷰 상태, 선택된 날짜, UI 상태",
  projectStore: "프로젝트 목록, 선택된 프로젝트, 색상",
  userStore: "인증 상태, 사용자 정보, 권한",
  uiStore: "테마, 사이드바, 모달 상태",
  offlineStore: "오프라인 상태, 동기화 큐"
}

// Apollo Client 설정
const APOLLO_CONFIG = {
  cache: "InMemoryCache 정규화 캐시",
  errorHandling: "GraphQL + Network 에러 정규화",
  retryLogic: "지수 백오프 재시도",
  subscription: "실시간 WebSocket 동기화",
  optimisticUpdates: "낙관적 업데이트 패턴"
}
```

### 성능 최적화 시스템
**[Source: ui-architecture/08-runtime-performance.md + 09-build-bundle-optimization.md]**
```typescript
// Core Web Vitals 목표
const PERFORMANCE_GOALS = {
  LCP: "2.5초 이하", // Largest Contentful Paint
  FID: "100ms 이하", // First Input Delay
  CLS: "0.1 이하",   // Cumulative Layout Shift
  FCP: "1.8초 이하", // First Contentful Paint
  TTI: "3.8초 이하"  // Time to Interactive
}

// 번들 최적화
const BUNDLE_OPTIMIZATION = {
  codesplitting: "도메인별 청크 분리 (calendar, projects)",
  treeshaking: "사용되지 않는 코드 제거",
  bundleAnalysis: "webpack-bundle-analyzer 통합",
  imageOptimization: "WebP, AVIF 포맷 지원"
}
```

### 보안 및 접근성 시스템
**[Source: ui-architecture/10-security-best-practices.md + 11-accessibility-implementation.md]**
```typescript
// 보안 아키텍처
const SECURITY_SYSTEM = {
  authentication: "JWT 토큰, httpOnly 쿠키",
  xssProtection: "CSP 헤더, 입력 검증",
  csrfProtection: "CSRF 토큰, SameSite 쿠키",
  dataEncryption: "전송 중 암호화, 민감 데이터 보호"
}

// 접근성 시스템 (WCAG 2.2 AA)
const ACCESSIBILITY_SYSTEM = {
  colorContrast: "4.5:1 비율 검증",
  touchTargets: "44px 최소 크기",
  keyboardNav: "Tab, Enter, Space, Arrow 키 지원",
  screenReader: "ARIA 라벨, 역할, 상태 제공",
  focusManagement: "포커스 트랩, 시각적 표시"
}
```

### 파일 구조 및 명명 규칙
**[Source: ui-architecture/02-project-structure.md]**
```
src/
├── app/                        # Next.js App Router
│   ├── (auth)/                 # 인증 라우트 그룹
│   ├── calendar/               # 캘린더 페이지
│   ├── projects/               # 프로젝트 관리
│   ├── globals.css             # 전역 스타일 (Design Tokens)
│   ├── layout.tsx              # 루트 레이아웃
│   └── page.tsx                # 홈페이지
├── components/
│   ├── ui/                     # ShadCN UI 컴포넌트 (MCP 서버 생성)
│   ├── layout/                 # 레이아웃 컴포넌트 (Blocks 기반)
│   ├── calendar/               # 캘린더 도메인 컴포넌트
│   ├── projects/               # 프로젝트 도메인 컴포넌트
│   └── common/                 # 공통 컴포넌트
├── lib/
│   ├── design-tokens/          # 디자인 토큰 시스템
│   ├── graphql/                # Apollo Client, 스키마, 쿼리
│   ├── monitoring/             # Sentry, 성능 모니터링
│   ├── security/               # 인증, 보안 유틸리티
│   └── accessibility/          # 접근성 유틸리티
├── stores/                     # Zustand 상태 스토어
├── hooks/                      # 커스텀 훅
└── types/                      # TypeScript 타입 정의
```

### PWA 및 모바일 최적화
**[Source: ui-architecture/13-pwa-mobile-responsive.md]**
- **PWA 매니페스트**: 네이티브 앱 경험
- **Service Worker**: 오프라인 지원, 캐시 전략
- **모바일 최적화**: 터치 제스처, 롱프레스 300ms
- **반응형 브레이크포인트**: sm(640px), md(768px), lg(1024px), xl(1280px), 2xl(1536px)

### 개발 도구 및 CI/CD
**[Source: ui-architecture/16-project-setup-guide.md + 18-development-checklist.md + 22-ci-pipeline-performance.md]**
- **GitHub Actions**: 품질 게이트, 성능 게이트, 배포 자동화
- **테스트 환경**: Jest + RTL (80% 커버리지), Playwright E2E
- **성능 모니터링**: Lighthouse CI, 번들 분석
- **코드 품질**: ESLint, TypeScript, Prettier, Husky

### 기술적 제약사항
- **MCP 서버 필수**: 모든 ShadCN UI 작업은 MCP 서버 경유
- **성능 목표**: Core Web Vitals 기준 준수
- **접근성 필수**: WCAG 2.2 AA 기준 준수
- **보안 우선**: JWT, XSS/CSRF 보호, 데이터 암호화
- **TypeScript 엄격**: strict mode, advanced types 사용

### Testing

#### 테스트 전략
**[Source: ui-architecture/12-monitoring-testing.md]**
- **단위 테스트**: Jest + RTL, 80% 커버리지 목표
- **통합 테스트**: 상태 관리, API 통합
- **E2E 테스트**: Playwright, 크로스 브라우저
- **접근성 테스트**: jest-axe, 자동 검증
- **성능 테스트**: Lighthouse CI, Core Web Vitals

#### 이 스토리의 테스트 요구사항
- 프로젝트 초기 설정 검증 (Next.js, TypeScript, Tailwind)
- ShadCN UI MCP 시스템 동작 검증
- 디자인 시스템 토큰 적용 검증 (색상, 타이포그래피, 간격)
- 상태 관리 시스템 통합 검증 (Apollo + Zustand)
- 레이아웃 시스템 반응형 동작 검증
- 성능 모니터링 시스템 동작 검증
- 접근성 기준 준수 검증 (색상 대비, 키보드 탐색)

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-08-27 | 2.0 | 23개 UI 아키텍처 문서 종합하여 완전 재작성 | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
[개발 에이전트가 구현 시 기록]

### Debug Log References  
[개발 중 생성된 디버그 로그 참조]

### Completion Notes List
[구현 완료 시 작업 내용 및 이슈 기록]

### File List
[생성되거나 수정된 파일 목록]

## QA Results
[QA 에이전트의 리뷰 결과]